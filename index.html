<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>About Me</title>
	<link rel="stylesheet" href="styles/reset.css">
	<link rel="stylesheet" href="styles/style.css">
	<link href="styles/circle-2.css" rel="stylesheet">
</head>
<body>

   
	<div class="head" id="home"><h4>About Me</h4></div>

   
<div class="contact-parent" id="contact">

	<navbar class="nav">
		
		
		<button class="buttons" but-data = 'about'><a href="#about">About</a></button>
		<button class="buttons" but-data = 'skill'><a href="#skills">Skills</a></button>
		<button class="buttons" but-data = 'interest'><a href="#interests">Interests</a></button>
		<button class="buttons" but-data = 'contact'><a href="#contact">Contact</a></button>

	</navbar>

<div class = 'contact-text head-mod' id = 'heading'>About Me</div>
	<div class="contact" id = 'new-cont'>
		
		

		<div class="contact-box"><div>Supratik Das</div><div class="fb"><img src="./images/hack.png" class="img"></div></div><div class="contact-box"><div>Indian Institute of Technology, Roorkee</div><div class="fb"><img src="./images/college.png" class="img"></div></div><div class="contact-box"><div>SDSLabs</div><div class="fb"><img src="./images/work.png" class="img"></div></div>

	</div>

</div>

<script>

	var navbar = document.querySelector(".nav");

	var contbox = document.querySelectorAll('.contact-box');

	function removeCurrentClass(){
    for(var i = 0; i < contbox.length; i++){
      contbox[i].classList.remove('current');
    }
  }

   function addCurrentClass(elem){
    removeCurrentClass();
    document.getElementById('new-cont').innerHTML = elem;
  }


    navbar.addEventListener('click', function(e){

    if(e.target != e.currentTarget){
      e.preventDefault();

		var data = e.target.getAttribute('but-data');	
		console.log(data);
		var url = data + ".html";
		loadDoc(data);
		window.history.pushState(data, null, url);
		}
    	e.stopPropagation();	
	}, false);


	function loadDoc(e) {
  		var xhttp = new XMLHttpRequest();
  		xhttp.onreadystatechange = function() {
    		if (this.readyState == 4 && this.status == 200) {
     		retrieveFunc(this, e);
   		 }
  		};
  		xhttp.open("GET", "data.xml", true);
  		xhttp.send();
  		}

  		function retrieveFunc(xml, e)
  		{
  			var i;
  			var doc = xml.responseXML;
  			var newbutselect = e;
  			
  			var content = '';

  			var abt = doc.getElementsByTagName('about')[0];
  			var skl = doc.getElementsByTagName('skills')[0];
  			var int = doc.getElementsByTagName('interests')[0];
  			var con = doc.getElementsByTagName('contacts')[0];

  			if(newbutselect=='about')
  			{
  				
  				
  				var title = abt.getElementsByTagName('title')[0].childNodes[0].nodeValue;
  				document.getElementById('heading').innerHTML = title;
  				console.log(abt.getElementsByTagName('inner')[2].getElementsByTagName('image')[0].childNodes[0].nodeValue);
  				for(i=0; i<3; i++){
  					content = content + '<div class="contact-box"><div>' + abt.getElementsByTagName('inner')[i].getElementsByTagName('text')[0].childNodes[0].innerHTML +'</div><div class="fb"><img src="' + abt.getElementsByTagName('inner')[i].getElementsByTagName('image')[0].childNodes[0].nodeValue + '" class="img"></div></div>';
  				}
  				console.log(content);
  				addCurrentClass(content);
  				

 
  			} 
  			if(newbutselect=='skill')
  			{
  				
  				var title = skl.getElementsByTagName('title')[0].childNodes[0].nodeValue;
  				document.getElementById('heading').innerHTML = title;

  				content = '<div class="skills-box"><div class="head-skills"><h2>HTML/CSS</h2></div><div class="progress"><div class="progress-circle over50 p80"><span>80%</span><div class="left-half-clipper"><div class="first50-bar"></div><div class="value-bar"></div></div></div></div></div><div class="skills-box"><div class="head-skills"><h2> C++ and JAVA</h2></div><div class="progress"><div class="progress-circle over50 p60"><span>60%</span><div class="left-half-clipper"><div class="first50-bar"></div><div class="value-bar"></div></div></div></div></div><div class="skills-box"><div class="head-skills"><h2>PHP and MySQL</h2></div><div class="progress"><div class="progress-circle p35"><span>35%</span><div class="left-half-clipper"><div class="first50-bar"></div><div class="value-bar"></div></div></div></div></div><div class="skills-box"><div class="head-skills"><h2>Android Studio</h2></div><div class="progress"><div class="progress-circle p25"><span>25%</span><div class="left-half-clipper"><div class="first50-bar"></div><div class="value-bar"></div></div></div></div></div>';
  				console.log(content);
  				addCurrentClass(content);
  			}
  			if(newbutselect=='interest')
  			{
  					
  				var title = int.getElementsByTagName('title')[0].childNodes[0].nodeValue;
  				document.getElementById('heading').innerHTML = title;
  				console.log(int.getElementsByTagName('inner')[2].getElementsByTagName('image')[0].childNodes[0].nodeValue);
  				for(i=0; i<4; i++){
  					content = content + '<div class="contact-box"><div>' + int.getElementsByTagName('inner')[i].getElementsByTagName('text')[0].childNodes[0].innerHTML +'</div><div class="fb"><img src="' + int.getElementsByTagName('inner')[i].getElementsByTagName('image')[0].childNodes[0].nodeValue + '" class="img"></div></div>';
  				}
  				console.log(content);
  				addCurrentClass(content);
  			}
  			if(newbutselect=='contact')
  			{
  				
  				var title = con.getElementsByTagName('title')[0].childNodes[0].nodeValue;
  				document.getElementById('heading').innerHTML = title;
  				console.log(con.getElementsByTagName('inner')[2].getElementsByTagName('image')[0].childNodes[0].nodeValue);
  				for(i=0; i<4; i++){
  					content = content + '<div class="contact-box"><div>' + con.getElementsByTagName('inner')[i].getElementsByTagName('text')[0].childNodes[0].innerHTML +'</div><div class="fb"><a href="'+ con.getElementsByTagName('inner')[i].getElementsByTagName('link')[0].childNodes[0].nodeValue +'"><img src="' + con.getElementsByTagName('inner')[i].getElementsByTagName('image')[0].childNodes[0].nodeValue + '" class="img"></a></div></div>';
  				}
  				console.log(content);
  				addCurrentClass(content);
  			}
  			

  		}

  		window.addEventListener('popstate', function(e){

  			console.log(e.state);
  			var inner = e.state;
  			if(inner == null){
  				removeCurrentClass();
  			}

  			else{
  				loadDoc(inner);
				console.log(window.history);	
  			}
		});

		history.replaceState(null, "Default state", './');
</script>


</body>
</html>


